# 主题命令使用说明

## 概述
主题命令 (`:theme`) 用于更新房间主题，主题会与标题组合成完整的房间名称。

## 架构设计
主题命令采用管理器模式设计：
- **ThemeManager**: 负责主题的存储、验证和管理
- **TitleManager**: 负责标题的存储、更新和UI操作
- **ThemeCommand**: 负责命令处理和用户交互

## 功能特性
- 主题最多支持2个字符
- 默认主题为"享乐"
- 主题更新后会自动更新房间名称
- 主题更新会绕过标题更新的冷却时间限制
- 支持从UI解析现有房间名称进行初始化

## 使用方法

### 基本语法
```
:theme <主题名称>
```

### 示例
```
:theme 音乐    # 将主题设置为"音乐"
:theme 派对    # 将主题设置为"派对"
:theme 享乐    # 将主题重置为默认"享乐"
```

### 完整使用流程示例
```
:title 经典老歌    # 设置标题为"经典老歌"
:theme 音乐        # 更改主题为"音乐"，房间名称自动更新为"音乐｜经典老歌"
:theme 派对        # 更改主题为"派对"，房间名称自动更新为"派对｜经典老歌"
```

### 房间名称格式
更新主题后，房间名称将按照以下格式显示：
```
主题｜标题
```

例如：
- 主题为"音乐"，标题为"经典老歌" → 房间名称：`音乐｜经典老歌`
- 主题为"派对"，标题为"劲爆舞曲" → 房间名称：`派对｜劲爆舞曲`

## 限制条件
- 主题名称不能超过2个字符
- 主题名称不能为空
- 主题名称会自动去除首尾空格

## 错误处理
- 如果主题名称超过2个字符，会返回错误提示
- 如果没有提供主题参数，会返回错误提示
- 如果主题名称为空字符串，会返回错误提示

## 与其他命令的集成
- 主题命令与标题命令 (`:title`) 配合使用
- 当更新主题时，会自动使用当前或下一个标题更新房间名称
- 主题更改会绕过标题更新的冷却时间限制
- 如果当前没有设置标题，主题更改不会影响房间名称
- 两个命令共享管理器，确保状态一致性

## 注意事项
- 主题更改会自动更新房间名称（如果有设置标题）
- 主题设置会持续到下次更改为止
- 重启应用后主题会重置为默认值"享乐"
- 主题更新不受标题更新冷却时间限制
- 应用启动时会自动从UI解析现有房间名称
- 如果房间名称格式为"主题｜标题"，会自动初始化主题和标题
